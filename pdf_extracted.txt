
--- PAGE 154 ---
ğŸš€  MASTER  EXECUTION  ORDER  
Project:  StayWise  V1  (Full  SaaS  MVP)  
 
ğŸ”µ  GLOBAL  RULES  (Antigravity  must  follow)  
1.  Never  skip  steps.  
 2.  Complete  each  phase  fully  before  moving  forward.  
 3.  Do  not  refactor  previously  working  modules  unless  breaking.  
 4.  Maintain  multi-tenant  isolation  using  ownerId.  
 5.  Use  Prisma  migrations  only.  
 6.  Do  not  introduce  external  libraries  unless  specified.  
 7.  Keep  code  production-structured.  
 8.  Use  environment  variables  strictly.  
 
 
PHASE  1  â€”  PROJECT  INITIALIZATION  
1 âƒ£  Create  Folder  Structure  staywise/  â”œâ”€â”€  backend/  â””â”€â”€  frontend/   
2 âƒ£  Backend  Setup  
--- PAGE 155 ---
Inside  /backend  
Initialize:  
npm  init  -y  npm  install  express  cors  dotenv  jsonwebtoken  bcrypt  zod  npm  install  prisma  @prisma/client  npm  install  pdfkit  npm  install  -D  typescript  ts-node-dev  @types/node  @types/express  @types/jsonwebtoken  
@types/bcrypt
 
@types/pdfkit
 
Initialize  TypeScript:  
npx  tsc  --init  
Initialize  Prisma:  
npx  prisma  init   
3 âƒ£  Setup  PostgreSQL  (Local)  
Ensure  local  Postgres  running.  
Set  .env:  
DATABASE_URL="postgresql://postgres:password@localhost:5432/staywise"  JWT_SECRET="very_long_secure_random_string"  JWT_EXPIRES_IN=7d  PORT=4000  NODE_ENV=development   
PHASE  2  â€”  DATABASE  SCHEMA  
(CRITICAL
 
FOUNDATION)
 
Antigravity  must  generate  full  schema:  
Required  Models  
â—  Owner  
 
--- PAGE 156 ---
â—  User  (roles:  SUPER_ADMIN,  OWNER,  MANAGER,  TENANT)  
 â—  Building  
 â—  Room  
 â—  Bed  
 â—  TenantAssignment  
 â—  Payment  
 â—  Complaint  
 
Requirements:  
â—  Multi-tenant  isolation  by  ownerId  
 â—  Unique  constraint  on  monthly  rent  period:  
 
 
@@unique([tenantAssignmentId,
 
periodYear,
 
periodMonth])
 
 
After  writing  schema:  
npx  prisma  migrate  dev  --name  init   
PHASE  3  â€”  CORE  BACKEND  
STRUCTURE
 
Create:  
src/   server.ts   app.ts   lib/     prisma.ts   middlewares/     auth.ts   modules/  
--- PAGE 157 ---
   auth/     buildings/     rooms/     beds/     tenants/     rent/     complaints/   
PHASE  4  â€”  AUTH  SYSTEM  
Implement:  
â—  Register  OWNER  
 â—  Login  
 â—  JWT  middleware  
 â—  Role-based  access  control  
 â—  ownerId  injection  from  token  
 
Must  protect:  
â—  Buildings  
 â—  Rooms  
 â—  Beds  
 â—  Assignments  
 â—  Rent  
 â—  Complaints  
 
 
PHASE  5  â€”  PROPERTY  MANAGEMENT  
--- PAGE 158 ---
Implement  APIs:  
â—  Create  building  
 â—  List  buildings  
 â—  Create  room  under  building  
 â—  List  rooms  
 â—  Create  beds  under  room  
 â—  List  beds  
 â—  Auto-set  bed  status  AVAILABLE  /  OCCUPIED  
 
 
PHASE  6  â€”  TENANT  MANAGEMENT  
Implement:  
â—  Create  tenant  (by  Owner)  
 â—  Assign  tenant  to  bed  
 â—  Set  bed  status  OCCUPIED  
 â—  Occupancy  dashboard  endpoint  
 â—  Vacate  endpoint:  
 â—‹  Set  assignment  INACTIVE  
 â—‹  Set  bed  AVAILABLE  
 â—‹  Save  endedAt  +  endedNote  
 
 
--- PAGE 159 ---
PHASE  7  â€”  RENT  MODULE  (Monthly  
System)
 
Implement:  
â—  Auto  current  period  logic  
 â—  GET  rent  summary  
 â—  GET  rent  assignments  
 â—  Mark  paid  
 â—‹  method  
 â—‹  reference  
 â—‹  note  
 â—  Mark  unpaid  
 â—  Payment  history  
 â—  Overdue  detection  logic  
 
 
PHASE  8  â€”  RECEIPT  SYSTEM  
Implement:  
â—  PDFKit  receipt  generation  
 â—  Receipt  No  format:  
 
 
SW-YYYYMM-XXXXXXXX
 
 â—  Download  endpoint  
 
--- PAGE 160 ---
â—  WhatsApp  message  endpoint  
 â—  Multi-tenant  security  check  before  generating  
 
 
PHASE  9  â€”  COMPLAINT  SYSTEM  
Implement:  
â—  Tenant  create  complaint  
 â—  Owner  fetch  complaints  
 â—  Owner  resolve  complaint  
 â—  Tenant  fetch  own  complaints  
 
 
PHASE  10  â€”  FRONTEND  (Next.js  App  
Router)
 
Inside  /frontend:  
npx  create-next-app@latest  .  --typescript  
Install  nothing  extra.  
Set  .env.local:  
NEXT_PUBLIC_API_URL=http://localhost:4000   
PHASE  11  â€”  FRONTEND  STRUCTURE  
Create:  
--- PAGE 161 ---
app/   login/   owner/     page.tsx  (Dashboard)     rent/     complaints/     tenants/     occupancy/   tenant/     page.tsx     rent/     complaints/  components/   AuthProvider   Protected   TopNav   ToastProvider  lib/   api.ts   download.ts   
PHASE  12  â€”  OWNER  DASHBOARD  
Must  include:  
â—  Buildings  count  
 â—  Rooms  count  
 â—  Beds  count  
 â—  Occupied  count  
 â—  Available  count  
 â—  Rent  summary  
 â—  Complaint  summary  
 â—  Quick  links  
 
--- PAGE 162 ---
 
PHASE  13  â€”  TENANT  PANEL  
Must  include:  
â—  Assigned  building/room/bed  
 â—  This  month  rent  status  
 â—  Raise  complaint  
 â—  Complaint  history  
 
 
PHASE  14  â€”  UX  POLISH  
Add:  
â—  Toast  system  (no  alert)  
 â—  Proper  button  disabled  states  
 â—  Refresh  buttons  
 â—  Error  handling  consistency  
 
 
PHASE  15  â€”  PRE-LAUNCH  HARDENING  
1.  Set  NODE_ENV  check  for  CORS.  
 2.  Strong  JWT  secret.  
 3.  Use  prisma  migrate  deploy for  production.  
 
--- PAGE 163 ---
4.  Verify  no  routes  exposed  without  auth.  
 5.  Ensure  no  owner  can  access  other  owner's  data.  
 
 
PHASE  16  â€”  DEPLOYMENT  ORDER  
Backend  
1.  Push  to  GitHub.  
 2.  Deploy  to  Render/Railway.  
 3.  Set:  
 â—‹  DATABASE_URL  
 â—‹  JWT_SECRET  
 â—‹  NODE_ENV=production  
 4.  Run:  
 
 
prisma
 
migrate
 
deploy
 
 
Frontend  
1.  Deploy  to  Vercel.  
 2.  Set:  
 
 
NEXT_PUBLIC_API_URL=https://backend-url
 
 
 
FINAL  EXECUTION  CONDITION  
--- PAGE 164 ---
Antigravity  must  not:  
â—  Skip  schema  constraints  
 â—  Skip  role  validation  
 â—  Mix  tenant  data  across  owners  
 â—  Generate  unnecessary  libraries  
 â—  Break  modular  structure  
 
 
ğŸ“Š  FINAL  STATUS  AFTER  EXECUTION  
When  all  phases  complete:  
â—  Multi-tenant  PG  management  SaaS  working  
 â—  Rent  monthly  system  with  PDF  receipts  
 â—  WhatsApp  integration  
 â—  Vacate  system  
 â—  Complaint  system  
 â—  Owner  dashboard  
 â—  Tenant  portal  
 
StayWise  V1  =  Production  Ready  MVP  
 